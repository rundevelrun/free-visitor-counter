"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);function n(e,t,r,n){return new(r||(r=Promise))((function(o,a){function c(e){try{i(n.next(e))}catch(e){a(e)}}function u(e){try{i(n.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,u)}i((n=n.apply(e,t||[])).next())}))}function o(e,t){var r,n,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=u(0),c.throw=u(1),c.return=u(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(u){return function(i){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,i])}}}"function"==typeof SuppressedError&&SuppressedError;var a=function(t){var a=t.totalCountPrefix,c=void 0===a?"Total: ":a,u=t.totalCountSuffix,i=void 0===u?"":u,s=t.todayCountPrefix,l=void 0===s?"Today: ":s,f=t.todayCountSuffix,d=void 0===f?"":f,p=t.separator,h=void 0===p?" | ":p,m=t.showTotalFirst,y=void 0===m||m,v=t.style,g=void 0===v?{}:v,b=t.className,w=void 0===b?"":b,E=t.onLoad,x=e.useState(null),P=x[0],S=x[1],C=e.useState(!0),T=C[0],j=C[1],k=e.useState(null),q=k[0],O=k[1];e.useEffect((function(){n(void 0,void 0,void 0,(function(){var e,t,r,n,a,c,u,i,s,l;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),e=window.location.hostname,t=window.location.pathname,r=document.title,n=document.referrer,a=Intl.DateTimeFormat().resolvedOptions().timeZone,c=_(document.referrer),u={domain:e,timezone:a,page_path:t,page_title:r,referrer:n,search_query:c},[4,fetch("https://visitor.6developer.com/visitor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})];case 1:if(!(i=o.sent()).ok)throw new Error("HTTP error! Status: ".concat(i.status));return[4,i.json()];case 2:return s=o.sent(),S(s),E&&E(s),[3,5];case 3:return l=o.sent(),O(l instanceof Error?l.message:"Unknown error"),console.error("Error fetching visitor count:",l),[3,5];case 4:return j(!1),[7];case 5:return[2]}}))}))}),[E]);var _=function(e){if(!e)return"";try{var t=new URL(e),r=t.hostname.toLowerCase();if(r.includes("google.com")||r.includes("google.co.kr")||r.includes("google.co.jp"))return t.searchParams.get("q")||"";if(r.includes("naver.com"))return t.searchParams.get("query")||"";if(r.includes("daum.net"))return t.searchParams.get("q")||"";if(r.includes("yahoo.com")||r.includes("yahoo.co.jp"))return t.searchParams.get("p")||"";if(r.includes("bing.com"))return t.searchParams.get("q")||"";if(r.includes("baidu.com"))return t.searchParams.get("wd")||"";if(r.includes("yandex.ru"))return t.searchParams.get("text")||""}catch(e){console.error("Error parsing referrer URL:",e)}return""};if(T)return r.default.createElement("span",{className:w,style:g},"Loading...");if(q||!P)return r.default.createElement("span",{className:w,style:g},"Error loading visitor count");var F="".concat(c).concat(P.totalCount).concat(i),L="".concat(l).concat(P.todayCount).concat(d),N=y?F:L,U=y?L:F,I=h.replace(/\\n/g,"\n");return r.default.createElement("a",{href:P.dashboardUrl,className:w,style:g,target:"_blank",rel:"noopener noreferrer"},N,I.includes("\n")?r.default.createElement(r.default.Fragment,null,r.default.createElement("br",null),U):r.default.createElement(r.default.Fragment,null,I,U))};exports.FreeVisitorCounter=a,exports.default=a;
//# sourceMappingURL=index.js.map
